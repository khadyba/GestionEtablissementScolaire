{
    "sourceFile": "app/Http/Controllers/SalleDeClasseController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1731406487122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1731406487122,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\Cours;\nuse App\\Models\\Classe;\nuse Illuminate\\Http\\Request;\nuse App\\Models\\SalleDeClasse;\n\nclass SalleDeClasseController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function index()\n    {\n        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n        return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n    }\npublic function afficherSallesDisponibles($id)\n{\n    $classe=Classe::findOrFail($id);\n    $cours = Cours::findOrFail($id);\n    $salles = SalleDeClasse::where('statut', 'libre')->get();\n\n    return view('Administrateur.Salle.listSalles', compact('salles', 'cours','classe'));\n}\n        public function assignSalle($coursId, $salleId)\n    {\n        $cours = Cours::find($coursId);\n        $salle = SalleDeClasse::find($salleId);\n        if (!$cours || !$salle) {\n            return redirect()->route('cours.index')->with('error', 'Le cours ou la salle de classe demandée n\\'existe pas.');\n        }\n        $cours->salle_de_classe_id = $salle->id;\n        $cours->save();\n        $salle->statut = 'occupée';\n        $salle->save();\n        return redirect()->route('professeurs.cours.detail', $coursId)->with('success', 'Salle de classe assignée avec succès.');\n    }\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function create()\n    {\n        return view('Administrateur.Salle.createSalle');\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function store(Request $request)\n    {\n        $validatedData = $request->validate([\n            'numéro' => 'required|integer',\n            'capaciter' => 'required|integer',\n        ]);\n    \n        SalleDeClasse::create([\n            'numéro' => $validatedData['numéro'],\n            'capaciter' => $validatedData['capaciter'],\n            'statut' => 'libre',\n        ]);\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe ajoutée avec succès.');\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function show(SalleDeClasse $salleDeClasse)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function edit($id)\n    {\n        $salle = SalleDeClasse::findOrFail($id);\n        return view('Administrateur.Salle.sallesDeClasseEdit', compact('salle'));\n    }\n\n    /**\n     * Update the specified resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function update(Request $request, $id)\n    {\n        $validatedData = $request->validate([\n            'numéro' => 'required|integer',\n            'capaciter' => 'required|integer',\n            'statut' => 'required|in:libre,occupe',\n        ]);\n    \n        $salle = SalleDeClasse::findOrFail($id);\n        $salle->update($validatedData);\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe mise à jour avec succès.');\n    }\n    \n\n    /**\n     * Remove the specified resource from storage.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function destroy($id)\n    {\n        $salle = SalleDeClasse::findOrFail($id);\n        $salle->is_deleted = true;\n        $salle->save();\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe supprimée avec succès.');\n    }\n}\n"
        }
    ]
}