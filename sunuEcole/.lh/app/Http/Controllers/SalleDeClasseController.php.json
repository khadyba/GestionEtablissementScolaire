{
    "sourceFile": "app/Http/Controllers/SalleDeClasseController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1731406487122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733227812021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n+        \n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733227828490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,10 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        \n+        $admin = Auth::guard('admin')->user()->id;\n+\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733227860109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,10 +16,9 @@\n      */\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n-\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false;)->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n {\n"
                },
                {
                    "date": 1733227870872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,10 @@\n      */\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false;)->get();\n+        $admin = Auth::guard('admin')->user()->id;\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false, )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n {\n"
                },
                {
                    "date": 1733227883753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,10 +16,9 @@\n      */\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n-        $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false, )->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n {\n"
                },
                {
                    "date": 1733227931461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n use App\\Models\\Cours;\n use App\\Models\\Classe;\n use Illuminate\\Http\\Request;\n use App\\Models\\SalleDeClasse;\n+use Illuminate\\Support\\Facades\\Auth;\n \n class SalleDeClasseController extends Controller\n {\n     /**\n@@ -16,9 +17,9 @@\n      */\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  )->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n public function afficherSallesDisponibles($id)\n {\n"
                },
                {
                    "date": 1733227951520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,8 +20,9 @@\n         $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n+    \n public function afficherSallesDisponibles($id)\n {\n     $classe=Classe::findOrFail($id);\n     $cours = Cours::findOrFail($id);\n"
                },
                {
                    "date": 1733227958157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,15 +14,16 @@\n      * Display a listing of the resource.\n      *\n      * @return \\Illuminate\\Http\\Response\n      */\n+    \n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n-    \n+\n public function afficherSallesDisponibles($id)\n {\n     $classe=Classe::findOrFail($id);\n     $cours = Cours::findOrFail($id);\n"
                },
                {
                    "date": 1733227966687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n      * Display a listing of the resource.\n      *\n      * @return \\Illuminate\\Http\\Response\n      */\n-    \n+    // afficher la lis\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n"
                },
                {
                    "date": 1733227973789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n      * Display a listing of the resource.\n      *\n      * @return \\Illuminate\\Http\\Response\n      */\n-    // afficher la lis\n+    // afficher la liste des salle que l'a\n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n"
                },
                {
                    "date": 1733227979238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n      * Display a listing of the resource.\n      *\n      * @return \\Illuminate\\Http\\Response\n      */\n-    // afficher la liste des salle que l'a\n+    // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n         $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n"
                },
                {
                    "date": 1733228183074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n      */\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n-        $admin = Auth::guard('admin')->user()->id;\n+        // $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n"
                },
                {
                    "date": 1733228216402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n         // $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  $admin )->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  'administrateur_id', auth('admin')->id() )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733228268120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n         // $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  'administrateur_id', auth('admin')->id() )->get();\n+        $sallesDeClasse = SalleDeClasse::where(  'administrateur_id', auth('admin')->id() )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733228293069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n         // $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where(  'administrateur_id', auth('admin')->id() )->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  'administrateur_id', auth('admin')->id() )->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733228308429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n         // $admin = Auth::guard('admin')->user()->id;\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false,  'administrateur_id', auth('admin')->id() )->get();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n public function afficherSallesDisponibles($id)\n"
                },
                {
                    "date": 1733341995287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,8 @@\n      */\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n     {\n-        // $admin = Auth::guard('admin')->user()->id;\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n \n"
                },
                {
                    "date": 1733342309493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,13 +16,20 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n-    {\n-        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n-        return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n-    }\n+{\n+    $admin = Auth::guard('admin')->user();\n+    \n+    // Récupérer les salles de classe créées par l'administrateur connecté\n+    $sallesDeClasse = SalleDeClasse::where('is_deleted', false)\n+                                    ->where('admin_id', $admin->id) // Assurez-vous que `admin_id` est la colonne qui relie la salle à l'administrateur\n+                                    ->get();\n \n+    return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n+}\n+\n+\n public function afficherSallesDisponibles($id)\n {\n     $classe=Classe::findOrFail($id);\n     $cours = Cours::findOrFail($id);\n"
                },
                {
                    "date": 1733342401619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,20 +16,19 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     // afficher la liste des salle que l'admin a créer \n     public function index()\n-{\n-    $admin = Auth::guard('admin')->user();\n+    {\n+        $admin = Auth::guard('admin')->user();\n+        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)\n+                                        ->where('admin_id', $admin->id) \n+                                        ->get();\n+        dd($sallesDeClasse); \n+        return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n+    }\n     \n-    // Récupérer les salles de classe créées par l'administrateur connecté\n-    $sallesDeClasse = SalleDeClasse::where('is_deleted', false)\n-                                    ->where('admin_id', $admin->id) // Assurez-vous que `admin_id` est la colonne qui relie la salle à l'administrateur\n-                                    ->get();\n \n-    return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n-}\n \n-\n public function afficherSallesDisponibles($id)\n {\n     $classe=Classe::findOrFail($id);\n     $cours = Cours::findOrFail($id);\n@@ -65,24 +64,37 @@\n      *\n      * @param  \\Illuminate\\Http\\Request  $request\n      * @return \\Illuminate\\Http\\Response\n      */\n-    public function store(Request $request)\n-    {\n-        $validatedData = $request->validate([\n-            'numéro' => 'required|integer',\n-            'capaciter' => 'required|integer',\n-        ]);\n-    \n-        SalleDeClasse::create([\n-            'numéro' => $validatedData['numéro'],\n-            'capaciter' => $validatedData['capaciter'],\n-            'statut' => 'libre',\n-        ]);\n-    \n-        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe ajoutée avec succès.');\n-    }\n+   \n+     public function store(Request $request)\n+     {\n+          // Étape 1 : Vérifiez si l'admin est récupéré\n+          $admin = Auth::guard('admin')->user();\n+           if (!$admin) {\n+               dd('Admin non connecté.');\n+           }\n+         $validatedData = $request->validate([\n+             'numéro' => 'required|integer',\n+             'capaciter' => 'required|integer',\n+         ]);\n+     \n+       \n+     \n+        \n+         // Étape 3 : Insérer la salle de classe\n+         SalleDeClasse::create([\n+             'numéro' => $validatedData['numéro'],\n+             'capaciter' => $validatedData['capaciter'],\n+             'statut' => 'libre',\n+             'admin_id' => $admin->id,\n+         ]);\n+     \n+         return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe ajoutée avec succès.');\n+     }\n+     \n \n+\n     /**\n      * Display the specified resource.\n      *\n      * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n"
                },
                {
                    "date": 1733342487433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         $admin = Auth::guard('admin')->user();\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false)\n                                         ->where('admin_id', $admin->id) \n                                         ->get();\n-        dd($sallesDeClasse); \n+        // dd($sallesDeClasse); \n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n     \n \n"
                },
                {
                    "date": 1733342552351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,8 @@\n         $admin = Auth::guard('admin')->user();\n         $sallesDeClasse = SalleDeClasse::where('is_deleted', false)\n                                         ->where('admin_id', $admin->id) \n                                         ->get();\n-        // dd($sallesDeClasse); \n         return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n     }\n     \n \n"
                }
            ],
            "date": 1731406487122,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\Cours;\nuse App\\Models\\Classe;\nuse Illuminate\\Http\\Request;\nuse App\\Models\\SalleDeClasse;\n\nclass SalleDeClasseController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function index()\n    {\n        $sallesDeClasse = SalleDeClasse::where('is_deleted', false)->get();\n        return view('Administrateur.Salle.sallesDeClasse', compact('sallesDeClasse'));\n    }\npublic function afficherSallesDisponibles($id)\n{\n    $classe=Classe::findOrFail($id);\n    $cours = Cours::findOrFail($id);\n    $salles = SalleDeClasse::where('statut', 'libre')->get();\n\n    return view('Administrateur.Salle.listSalles', compact('salles', 'cours','classe'));\n}\n        public function assignSalle($coursId, $salleId)\n    {\n        $cours = Cours::find($coursId);\n        $salle = SalleDeClasse::find($salleId);\n        if (!$cours || !$salle) {\n            return redirect()->route('cours.index')->with('error', 'Le cours ou la salle de classe demandée n\\'existe pas.');\n        }\n        $cours->salle_de_classe_id = $salle->id;\n        $cours->save();\n        $salle->statut = 'occupée';\n        $salle->save();\n        return redirect()->route('professeurs.cours.detail', $coursId)->with('success', 'Salle de classe assignée avec succès.');\n    }\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function create()\n    {\n        return view('Administrateur.Salle.createSalle');\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function store(Request $request)\n    {\n        $validatedData = $request->validate([\n            'numéro' => 'required|integer',\n            'capaciter' => 'required|integer',\n        ]);\n    \n        SalleDeClasse::create([\n            'numéro' => $validatedData['numéro'],\n            'capaciter' => $validatedData['capaciter'],\n            'statut' => 'libre',\n        ]);\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe ajoutée avec succès.');\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function show(SalleDeClasse $salleDeClasse)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function edit($id)\n    {\n        $salle = SalleDeClasse::findOrFail($id);\n        return view('Administrateur.Salle.sallesDeClasseEdit', compact('salle'));\n    }\n\n    /**\n     * Update the specified resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function update(Request $request, $id)\n    {\n        $validatedData = $request->validate([\n            'numéro' => 'required|integer',\n            'capaciter' => 'required|integer',\n            'statut' => 'required|in:libre,occupe',\n        ]);\n    \n        $salle = SalleDeClasse::findOrFail($id);\n        $salle->update($validatedData);\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe mise à jour avec succès.');\n    }\n    \n\n    /**\n     * Remove the specified resource from storage.\n     *\n     * @param  \\App\\Models\\SalleDeClasse  $salleDeClasse\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function destroy($id)\n    {\n        $salle = SalleDeClasse::findOrFail($id);\n        $salle->is_deleted = true;\n        $salle->save();\n    \n        return redirect()->route('admin.salles-de-classe.index')->with('success', 'Salle de classe supprimée avec succès.');\n    }\n}\n"
        }
    ]
}